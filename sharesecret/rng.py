import hashlib

def rolls():
    while True:
        s=raw_input("Enter die rolls: ")
        for c in s:
            if c in "123456":
                yield int(c)
                
def diebits():
    r=rolls()
    while True:
        a=r.next()-1
        b=r.next()-1
        c=r.next()-1
        d=r.next()-1
        n=a*6*6*6+b*6*6+c*6+d
        if n<1024:
            for i in range(10):
                yield n%2
                n=n/2
        else:
            n=n-1024
            if n<256:
                for i in range(8):
                    yield n%2
                    n=n/2
            else:
                n=n-256
                for i in range(4):
                    yield n%2
                    n=n/2
                
def sysrandom():
    f=open("/dev/random")
    while True:
        n=ord(f.read(1))
        for i in range(8):
            yield n%2
            n=n/2

def sharng():
    s=raw_input("Enter a good amount of nonsense: ")
    h=""
    while True:
        h=hashlib.sha256(h+s+h+s).hexdigest()
        yield int(h,16)%2

def bbs():
    M=307896031842273978573209784982251988056248456785692746935399155833332594964136832715142892060516263218489573541438248723356555138884339075099396756315721531355876858849275284396787501421840830460181935154404587831208035016544913904957503764201511939103060472119345654260089282384176926872177391642322386296246344984252604554102500973441970178025775004027079787389842132949698167862145197080951005834979365217009253576683292953793348009807329062764645824768266947333728663896224907240626327467009131824325378602762612853694230201570744162659496648872118481734300181954483186045039665203474630555598326856875010144910681105912328907451230059757769333602456112562470403590047559398991001095127216369942900423900253440785199356570022893695235985535897347260977031816142164610386937311188746797362401214368499695018336074343387325310823657570788990353576636174968997037764431435567983892872520124773632902925704506763585679678860316115656709618124278775527507338511682215173952430575853792753708033383848548521208394944585715096457686052187143605243155912780906045482678160974976952796784583283475810269812454513770916342537980973418098747042150312854960497919610365638191842924945140770056752471038308127176536312476204644144907647296569L
    s=raw_input("Enter a good amount of nonsense: ")
    x=int(hashlib.sha256(s).hexdigest(),16)
    while True:
        x=(x*x)%M
        yield x%2
        
    
def rnggen():
    a=diebits()
    b=sysrandom()
    c=sharng()
    d=bbs()
    while True:
        x=a.next()+b.next()+c.next()+d.next()
        yield x%2

randombits=rnggen()


_range=1
_x=0
def random_int(m):
    global _range
    global _x
    while True:
        while _range<m:
            _range=_range*2
            _x=_x*2+randombits.next()
        n=1
        while (n+1)*m<_range:
            n=n+1
        if _x<n*m:
            r=_x/n
            _range=n
            _x=_x%n
            return r
        _x=_x-n*m
        _range=_range-n*m

